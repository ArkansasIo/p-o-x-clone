<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>POX Asset Exporter (PNG → 2bpp + Tiles + WAD)</title>
  <link rel="stylesheet" href="./style.css"/>
</head>
<body>
  <header>
    <h1>POX Asset Exporter</h1>
    <p>Load PNG sprites, quantize to 4-shade LCD, export <b>2bpp</b> binary, tiles, and a WAD bundle — in-browser.</p>
  </header>

  <main class="grid">
    <section class="card">
      <h2>1) Load PNG</h2>
      <input id="file" type="file" accept="image/png,image/webp,image/jpeg"/>
      <div class="row">
        <label>Tile size
          <select id="tileSize">
            <option value="8">8×8</option>
            <option value="16">16×16</option>
            <option value="32">32×32</option>
          </select>
        </label>
        <label>Dither
          <select id="dither">
            <option value="none">None</option>
            <option value="bayer">Bayer (light)</option>
          </select>
        </label>
      </div>
      <canvas id="src" width="256" height="256"></canvas>
      <canvas id="lcd" width="256" height="256"></canvas>
      <div class="hint">Left: source. Right: quantized 4-shade LCD preview.</div>
    </section>

    <section class="card">
      <h2>2) Export</h2>
      <div class="row">
        <button id="btn2bpp">Download 2bpp (.bin)</button>
        <button id="btnTiles">Download Tileset (.bin)</button>
        <button id="btnWad">Download WAD (.wad)</button>
      </div>
      <details>
        <summary>Export options</summary>
        <label class="block"><input type="checkbox" id="interleave" checked/> Interleave tiles row-major (recommended)</label>
        <label class="block"><input type="checkbox" id="padToTile" checked/> Pad image to tile grid</label>
      </details>
      <pre id="log"></pre>
    </section>

    <section class="card">
      <h2>3) Metadata</h2>
      <textarea id="meta" spellcheck="false"></textarea>
      <div class="row">
        <button id="btnMeta">Download metadata.json</button>
        <button id="btnProject">Download pox_project.json</button>
      </div>
    </section>
  </main>

  <footer>
    <small>POX format: 4-shade LCD, packed 2bpp (4 pixels per byte). WAD: simple lump archive.</small>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
